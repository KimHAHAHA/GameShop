<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KIMKY STORE - Code</title>
  </head>
  <body>
    <app-header-admin></app-header-admin>

    <main class="container">
      <h2>Code</h2>

      <!-- ✅ แสดงรายการโค้ด -->
      <div class="code-box">
        <div class="code-item" *ngFor="let c of codes">
          <p>
            <strong>{{ c.code }} -----</strong>
          </p>
          <span> {{ c.used_count }}/{{ c.max_use }}-----</span>
          <small> {{ c.discount_percent }}% OFF</small>
        </div>

        <!-- ถ้าไม่มีโค้ด -->
        <p *ngIf="!codes || codes.length === 0" class="no-code">
          ยังไม่มีโค้ดในระบบ
        </p>
      </div>

      <!-- ✅ ฟอร์มสร้างโค้ด -->
      <h3>Create Discount Code</h3>

      <form class="create-form" (submit)="createCode($event)">
        <div class="input-group">
          <label for="code">Code</label>
          <input
            type="text"
            id="code"
            placeholder="Enter code"
            [(ngModel)]="newCode"
            name="code"
            required
          />
        </div>

        <div class="input-group">
          <label for="discount_percent">Discount (%)</label>
          <input
            type="number"
            id="discount_percent"
            placeholder="Enter discount percent"
            [(ngModel)]="newDiscount"
            name="discount_percent"
            required
          />
        </div>

        <div class="input-group">
          <label for="max_use">Max Use</label>
          <input
            type="number"
            id="max_use"
            placeholder="Enter max use count"
            [(ngModel)]="newMaxUse"
            name="max_use"
            required
          />
        </div>

        <button type="submit" class="create-btn">Create</button>
      </form>
    </main>
  </body>
</html>
